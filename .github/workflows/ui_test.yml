# This is a basic workflow that is manually triggered

name: UI_TESTS

# Controls when the action will run. Workflow runs when manually triggered using the UI
# or API.
on: [workflow_dispatch]
jobs:
  test:
    runs-on: ubuntu-latest
    container: ghcr.io/imankulov-ruslan/my-svc
    steps:
    - name: test  
      run:
        cd /app;
        robot --variable ui_auth_password:${{secrets.UI_AUTH_PASSWORD}} -A src/config/test-runner/dev-args.robot;
        ls;
        cd /app/reports;
        ls;
        git config --global user.name 'Pipeline';
        git config --global user.email 'Imankulov-ruslan@users.noreply.github.com';
        git remote set-url origin https://x-access-token:${{ secrets.CR_PAT }}@github.com/${{ github.repository }};
        git add -A .;
        git status;
        git commit -m "deploy";
        git push -f origin test-results;

